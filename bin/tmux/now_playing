#!/usr/bin/env osascript
# Returns the current playing song in iTunes for OSX

on run argv
  tell application "iTunes"
  if it is running then
    if player state is playing then
      set track_name to name of current track
      set artist_name to artist of current track
      if artist_name > 0
        set t to track_name & " - " & artist_name
        if argv <= 90
          if length of t > 27
            text 1 thru 27 of t & "..."
          else
            t
          end if
        else
          track_name & " - " &	artist_name
        end if
      else
        "~ " & track_name
      end if
    end if
  end if
  end tell
end run
