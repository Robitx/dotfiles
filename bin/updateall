#!/bin/bash

ping -c 1 google.com
if [ $? -eq 0 ];
then
  printf "\\033[34m"
  echo -e "\n#######################"
  printf "# Checking for updates #\n"
  echo -e "#######################\n"
  printf "\\033[0m"
  printf "\\033[33m## Homebrew #\\033[0m\\n"
  brew update && brew upgrade && brew cask upgrade;
  brew doctor;
  printf "\\033[33m## Vim Plug #\\033[0m\\n"
  $EDITOR +PlugUpdate +qall && $EDITOR +PlugUpgrade +qall;
  printf "\\033[33m## Pip #\\033[0m\\n"
  pip list --outdated --format=freeze | grep -v '^\-e' | cut -d = -f 1  \
    | xargs -n1 pip install -U
  printf "\\033[33m## NPM #\\n"
  # due to brew node@10
  # npm install npm -g;
  npm update -g;
  printf "\\033[33m## Ruby Gems #\\033[0m\\n"
  OPT="-n /usr/local/bin"
  GBIN=$(which gem)
  sudo $GBIN update "$OPT" --system;
  sudo $GBIN update "$OPT";
  sudo $GBIN cleanup;
  printf "\\033[33m## macOS #\\033[0m\\n"
  softwareupdate -i -a;
  echo $'\e]9;Updates Completed\007'
else
  echo $'\e]9;No Internetconnection\007'
fi
