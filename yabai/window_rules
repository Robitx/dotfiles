#!/usr/bin/env sh

NUM_SPACES=$(yabai -m query --spaces | jq '. | length')

# general exceptions
yabai -m rule --add app='^System Information$' manage=off border=off
yabai -m rule --add app='^System Preferences$' manage=off border=off
yabai -m rule --add title='Preferences$' manage=off border=off
yabai -m rule --add title='Settings$' manage=off border=off
yabai -m rule --add title="(Picture in Picture|Picture-in-Picture)" manage=off border=off

# app-specific rules
APPS="^(Dictionary|Music|Podcasts|App Store|Calendar|Photos)$"
yabai -m rule --add app="${APPS}" manage=off border=off

CENTER_APPS="^(Anki|Bitwarden)$"
yabai -m rule --add app="${CENTER_APPS}" manage=off border=off grid=4:4:1:0:2:4

if [[ $NUM_SPACES -gt 2 ]]; then
  # apps for "social" space
  yabai -m rule --add app="^(Messages|Discord|Signal|Telegram|Mattermost|Zoom)$" space=3
fi
