#!/usr/bin/env bash
# Responsive tmux status bar

WIDTH=${1}
SMALL=90
TMUX_BIN="$DOTFILES/tmux/bin"

BAR+="#($TMUX_BIN/mail_count_apple)"

TUNE=$("$TMUX_BIN/now_playing" "$WIDTH")

[[ -n $TUNE ]] && \
  BAR+="#[fg=colour74]#($TMUX_BIN/now_playing $WIDTH)#[default]"

if [[ $WIDTH -ge 120 ]]; then
  BAR+="#($TMUX_BIN/ip_info)#[default]"
fi

if [[ -n $TUNE ]] && [[ $WIDTH -le $SMALL ]] ; then
  BAR+=" #(tmux-mem-cpu-load -a 0 -g 0 -i 2 -t 0)"
else
  BAR+=" #(tmux-mem-cpu-load -a 0 -g 10 -i 2 -t 0)"
fi

BAR+=" #[fg=colour172]#($TMUX_BIN/osx-cpu-temp)"
BAR+="#($TMUX_BIN/internet_info)"


printf '%s' "$BAR"
