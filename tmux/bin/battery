#!/usr/bin/env zsh

battery_info=( $(pmset -g batt | tr -d '\n' | awk '{print $8 $9}' | tr ';' ' ') )
battery_percentage="${battery_info[1]}"
battery_status="${battery_info[2]}"

battery_color="7"
if [[ ($battery_status == 'discharging;' && ${battery_percentage%?} -le 20) ]]; then
   battery_color="1"
elif [[ $battery_status == 'charging;' ]]; then
   battery_color="11"
fi

echo -n " #[fg=colour184]ÏŸ[#[fg=colour$battery_color]${battery_percentage%?}#[fg=colour184]]#[default]%"
